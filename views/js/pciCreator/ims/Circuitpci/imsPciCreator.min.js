define("tpl!CircuitPCI/interaction/creator/tpl/propertiesForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="panel">\n    <label for="inventaire">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},
helper?helper.call(depth0,"Correction",options):helperMissing.call(depth0,"__","Correction",options)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Correction TODO",options):helperMissing.call(depth0,"__","Correction TODO",options)))+'</span>\n    <button id="correct">Sauver la correction</button>\n    <div class="etiqSaved"></div>\n    <label for="inventaire">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},
data:data
},helper?helper.call(depth0,"Notes de Dev.",options):helperMissing.call(depth0,"__","Notes de Dev.",options)))+"</label>\n    <div style=\"font-size: 0.7em;\">\n        <p>On note que dans cette version, nous ne disposons pas d'un loader. Le concepteur d'item ne peut pas figer l'état du circuit sur le canvas. L'élève doit pour le moment commencer son travail avec un canvas vide. L'item rechargé dans l'éditeur présente\n            lui-aussi un canvas vide, même si la logique de la correction a été enregistrée.</p>\n        <p>Nous sommes bien en mesure de mémoriser la logique du Circuit à travers un JSON. Le concepteur d'item peut ainsi sauvegarder sa correction qui peut s'afficher sous la forme d'une vignette dans le panel option de la PCI.\n        </p>\n        <p>Présentées sous la forme d'un JSON, les valeurs des connecteurs permettent de définir quel connecteur est connecté avec quel autre. Exemple : un connecteur 1 de la batterie aura comme valeur 2, il est connecté avec le cable qui a son connecteur1\n            de valeur 2 également.</p>\n        <p>On pourrait envisager la correction automatique, partielle ou totale en comparant le JSON de correction avec le JSON représentant la production de l'élève.</p>\n        <p>Pistes futurs dev. : </p>\n        <ol>\n            <li>Loader de composant à partir d'un script JSON</li>\n            <li>Correction automatique.</li>\n            <li>Utiliser ce framework pour une PCI MindMap plus ouverte</li>\n            <li>Envisager des sets de composants</li>\n        </ol>\n    </div>\n</div>"
})}),define("CircuitPCI/interaction/creator/widget/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/editor/simpleContentEditableElement","tpl!CircuitPCI/interaction/creator/tpl/propertiesForm","lodash","jquery"],function(stateFactory,Question,formElement,simpleEditor,formTpl,_){"use strict";var CircuitInteractionStateQuestion=stateFactory.extend(Question,function(){var $container=this.widget.$container,interaction=this.widget.element;simpleEditor.create($container,".Circuit-label-min",function(text){
interaction.prop("label-min",text)}),simpleEditor.create($container,".Circuit-label-max",function(text){interaction.prop("label-max",text)})},function(){simpleEditor.destroy(this.widget.$container)});return CircuitInteractionStateQuestion.prototype.initForm=function(){var _widget=this.widget,$form=_widget.$form,interaction=_widget.element,response=interaction.getResponseDeclaration();$form.html(formTpl({serial:response.serial})),formElement.initWidget($form),$form.find("#correct").on("click",function(){interaction.triggerPci("correctChange")}),
interaction.prop("etiquette").length>0&&$form.find(".etiqSaved").html('<img src = "'+interaction.prop("etiquette")+'" title = "aperçu" alt = "aperçu" >'),interaction.onPci("grabCorrectChange",function(value,etiquette){console.log(value),interaction.prop("savedCircuit",value),interaction.prop("etiquette",etiquette),$form.find(".etiqSaved").html('<img src="'+etiquette+'" title="aperçu" alt="aperçu" />')}),formElement.setChangeCallbacks($form,interaction,{})},CircuitInteractionStateQuestion}),
define("CircuitPCI/interaction/creator/widget/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/helpers/content"],function(stateFactory,Answer,answerStateHelper){"use strict";var InteractionStateAnswer=stateFactory.extend(Answer,function(){this.widget.$original.find(".Circuit input").prop("disabled",!0)},function(){this.widget.$original.find(".Circuit input").prop("disabled",!1)});return InteractionStateAnswer.prototype.initResponseForm=function(){
answerStateHelper.initResponseForm(this.widget,{rpTemplates:["CUSTOM","NONE"]})},InteractionStateAnswer}),define("CircuitPCI/interaction/creator/widget/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states","CircuitPCI/interaction/creator/widget/states/Question","CircuitPCI/interaction/creator/widget/states/Answer"],function(factory,states){"use strict";return factory.createBundle(states,arguments,["correct","map"])}),
define("CircuitPCI/interaction/creator/widget/Widget",["taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget","CircuitPCI/interaction/creator/widget/states/states"],function(Widget,states){"use strict";var CircuitScaleInteractionWidget=Widget.clone();return CircuitScaleInteractionWidget.initCreator=function(){this.registerStates(states),Widget.initCreator.call(this),this.element.getResponseDeclaration().setTemplate("NONE")},CircuitScaleInteractionWidget}),define("tpl!CircuitPCI/interaction/creator/tpl/markup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="";return buffer+='<div class="CircuitInteraction">\n    <div class="circuit">\n        <div class="prompt">',(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"==typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),
buffer+='</div>\n        <div class="toolbar"></div>\n        <div id="divFloatingEditBox"></div>\n        <div class="divEditor">\n            <canvas width="900" height="500"></canvas>\n        </div>\n        <div class="data">\n            <div class="CSaver"></div>\n            <div class="raw"></div>\n            <div class="etiquette"></div>\n        </div>\n        <div class="help">\n\n        </div>\n    </div>\n</div>'})}),define("CircuitPCI/imsPciCreator",["lodash","CircuitPCI/interaction/creator/widget/Widget","tpl!CircuitPCI/interaction/creator/tpl/markup"],function(_,Widget,markupTpl){"use strict";return{getTypeIdentifier:function(){
return"CircuitPCI"},getWidget:function(){return Widget},getDefaultProperties:function(pci){return{savedCircuit:"",etiquette:""}},afterCreate:function(pci){pci.getResponseDeclaration().setTemplate("NONE")},getMarkupTemplate:function(){return markupTpl},getMarkupData:function(pci,defaultData){return defaultData.prompt=pci.data("prompt"),defaultData}}}),define(["CircuitPCI/imsPciCreator"],function(IMSPCI){return IMSPCI});
//# sourceMappingURL=imsPciCreator.min.js.map